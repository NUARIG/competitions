- content_for(:page_title, 'My Submissions')

%h3
  = yield(:page_title)

= search_form_for @q, url: profile_submissions_path do |f|
  .grid-x.grid-margin-x.medium-margin-collapse
    .small-12.medium-2.cell
      %label.text-left.middle
        Search Grant or Project
    .small-12.medium-2.cell
      = f.search_field :title_or_grant_name_cont
    .small-12.medium-3.cell
      = f.submit 'Search', class: 'button'
      = link_to 'Reset', profile_submissions_path, class: 'button clear secondary'

- if @submissions.empty?
  %p
    No submissions were found.
- else

  = render partial: 'shared/pagy_header', locals: { pagy: @pagy }

  %table
    %thead
      %tr
        %th
          = sort_link(@q, :title, 'Project Title')
        %th
          = sort_link(@q, :grant_name, 'Grant')
        %th
          = sort_link(@q, :created_at, 'Submitted On')
        %th
    %tbody
      - @submissions.each do |submission|
        %tr
          %td
            = link_to submission.title, grant_submission_path(submission.grant, submission)
          %td
            = link_to submission.grant.name, grant_path(submission.grant)
          %td
            = submission.created_at

  != pagy_foundation_nav(@pagy)
